<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Big Reveal Generator</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&family=Dancing+Script:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&family=Great+Vibes&family=Roboto:wght@300;400;500;700&family=Lora:wght@400;500;600;700&family=Pacifico&family=Crimson+Text:wght@400;600&family=Sacramento&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Poppins', sans-serif; }
  input:focus, select:focus { outline: none; box-shadow: 0 0 0 3px rgba(255,184,141,0.2); border-color:#ffb88d; }
</style>
</head>
<body class="min-h-screen py-8" style="background-color:#ffe4b7;">
<!-- Password Screen -->
<div id="passwordScreen" class="max-w-md mx-auto">
  <div class="bg-white rounded-2xl shadow-xl p-8 text-center">
    <h1 class="text-2xl font-bold mb-4" style="color:#1f2937;">Access Required</h1>
    <form id="passwordForm" class="space-y-4">
      <input id="passwordInput" type="password" placeholder="Enter code" class="w-full px-4 py-3 border border-gray-300 rounded-lg text-center font-mono text-lg tracking-wider" />
      <button type="submit" class="w-full py-3 rounded-lg font-semibold bg-[#c0dcca] text-gray-800 hover:bg-[#a8d0b5]">Access Template</button>
      <div id="passwordError" class="text-red-500 text-sm hidden">Incorrect code.</div>
    </form>
  </div>
</div>
<!-- Main Application -->
<div id="mainApp" class="max-w-6xl mx-auto px-4 hidden">
  <div class="text-center mb-8">
    <h1 class="text-4xl font-bold" style="color:#1f2937;">Big Reveal Generator</h1>
    <p class="text-gray-600">Create your personalized reveal page and get a shareable link!</p>
  </div>
  <form id="revealForm" class="space-y-8">
    <!-- Section 1 -->
    <div class="bg-white rounded-2xl shadow-xl p-8" id="section1">
      <div class="flex items-center mb-6">
        <div class="rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm mr-3" style="background-color:#ffb88d;color:#1f2937;">1</div>
        <h2 class="text-2xl font-bold text-gray-800">Colors & Styling</h2>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <label for="backgroundTheme" class="block text-sm font-semibold text-gray-700 mb-2">Background Theme</label>
          <select id="backgroundTheme" class="w-full px-4 py-3 border border-gray-300 rounded-lg mb-3" required>
            <option value="">Choose a theme...</option>
            <option value="beige">Beige</option>
            <option value="pink">Pink</option>
            <option value="blue">Blue</option>
            <option value="yellow">Yellow</option>
            <option value="green">Green</option>
            <option value="purple">Purple</option>
            <option value="gold">Gold</option>
            <option value="white">White</option>
            <option value="custom">Custom Color</option>
          </select>
          <div id="backgroundCustom" class="hidden">
            <div class="flex items-center space-x-3">
              <input type="color" id="backgroundPicker" class="w-12 h-12 border rounded-lg" value="#eedec5" />
              <input type="text" id="backgroundHex" class="flex-1 px-4 py-3 border rounded-lg" pattern="^#([0-9A-Fa-f]{6})$" placeholder="#eedec5" />
            </div>
          </div>
        </div>
        <div>
          <label for="textColor" class="block text-sm font-semibold text-gray-700 mb-2">Text Color</label>
          <select id="textColor" class="w-full px-4 py-3 border border-gray-300 rounded-lg mb-3" required>
            <option value="">Choose a color...</option>
            <option value="#000000">Black</option>
            <option value="#ffffff">White</option>
            <option value="#374151">Dark Gray</option>
            <option value="#dc2626">Red</option>
            <option value="#ea580c">Orange</option>
            <option value="#ca8a04">Yellow</option>
            <option value="#16a34a">Green</option>
            <option value="#2563eb">Blue</option>
            <option value="#7c3aed">Purple</option>
            <option value="#ff69b4">Pink</option>
            <option value="custom">Custom Color</option>
          </select>
          <div id="textCustom" class="hidden">
            <div class="flex items-center space-x-3">
              <input type="color" id="textPicker" class="w-12 h-12 border rounded-lg" value="#000000" />
              <input type="text" id="textHex" class="flex-1 px-4 py-3 border rounded-lg" pattern="^#([0-9A-Fa-f]{6})$" placeholder="#000000" />
            </div>
          </div>
        </div>
        <div>
          <label for="outlineColor" class="block text-sm font-semibold text-gray-700 mb-2">Text Outline Color</label>
          <select id="outlineColor" class="w-full px-4 py-3 border border-gray-300 rounded-lg" required>
            <option value="transparent">None</option>
            <option value="#000000">Black</option>
            <option value="#ffffff">White</option>
            <option value="#374151">Dark Gray</option>
            <option value="#dc2626">Red</option>
            <option value="#ea580c">Orange</option>
            <option value="#ca8a04">Yellow</option>
            <option value="#16a34a">Green</option>
            <option value="#2563eb">Blue</option>
            <option value="#7c3aed">Purple</option>
            <option value="#ff69b4">Pink</option>
            <option value="custom">Custom Color</option>
          </select>
          <div id="outlineColorCustom" class="hidden mt-3">
            <div class="flex items-center space-x-3">
              <input type="color" id="outlinePicker" class="w-12 h-12 border rounded-lg" value="#ffffff" />
              <input type="text" id="outlineHex" class="flex-1 px-4 py-3 border rounded-lg" pattern="^#([0-9A-Fa-f]{6})$" placeholder="#ffffff" />
            </div>
          </div>
        </div>
        <div>
          <label for="fontFamily" class="block text-sm font-semibold text-gray-700 mb-2">Font Style</label>
          <select id="fontFamily" class="w-full px-4 py-3 border border-gray-300 rounded-lg" required>
            <option value="Poppins">Poppins</option>
            <option value="Playfair Display">Playfair Display</option>
            <option value="Dancing Script">Dancing Script</option>
            <option value="Montserrat">Montserrat</option>
            <option value="Great Vibes">Great Vibes</option>
            <option value="Roboto">Roboto</option>
            <option value="Lora">Lora</option>
            <option value="Pacifico">Pacifico</option>
            <option value="Crimson Text">Crimson Text</option>
            <option value="Sacramento">Sacramento</option>
          </select>
        </div>
      </div>
      </div>
      <div class="hidden md:block mt-8">
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Live Preview</h3>
        <div id="previewBackground" class="flex items-center justify-center rounded-lg w-24 mx-auto" style="aspect-ratio:9/16;background-color:#f3f3f3;">
          <div id="previewText" class="text-center">
            <h1 id="previewMain" class="text-3xl font-bold">Your Text Here</h1>
            <p id="previewSub" class="text-lg">This will be the style for the reveal</p>
          </div>
        </div>
      </div>
    </div>
    <!-- Section 2 -->
    <div class="bg-white rounded-2xl shadow-xl p-8" id="section2">
      <div class="flex items-center mb-6">
        <div class="rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm mr-3" style="background-color:#ffb88d;color:#1f2937;">2</div>
        <h2 class="text-2xl font-bold text-gray-800">Main Announcement</h2>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <label for="mainHeadline" class="block text-sm font-semibold text-gray-700 mb-2">Main Headline</label>
          <input id="mainHeadline" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="We're Expecting!" required />
          <p class="text-xs text-gray-500 mt-1">This text will appear in ALL CAPS.</p>
          <p class="text-xs font-medium mt-1" style="color:#c0dcca;">Note: This text will appear in ALL CAPS on your reveal page.</p>
        </div>
        <div class="hidden md:block">
          <h3 class="text-lg font-semibold text-gray-700 mb-2">Live Preview â€” Page 1</h3>
          <div id="preview1Background" class="flex items-center justify-center rounded-lg w-24 mx-auto" style="aspect-ratio:9/16;background-color:#f3f3f3;">
            <h1 id="preview1Text" class="text-4xl font-bold" style="display:none"></h1>
          </div>
        </div>
      </div>
    </div>
    <!-- Section 3 -->
    <div class="bg-white rounded-2xl shadow-xl p-8" id="section3">
      <div class="flex items-center mb-6">
        <div class="rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm mr-3" style="background-color:#ffb88d;color:#1f2937;">3</div>
        <h2 class="text-2xl font-bold text-gray-800">Additional Details</h2>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <label for="message1" class="block text-sm font-semibold text-gray-700 mb-2">Message 1</label>
          <input id="message1" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="Baby Johnson" required />
        </div>
        <div>
          <label for="message2" class="block text-sm font-semibold text-gray-700 mb-2">Message 2 (optional)</label>
          <input id="message2" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="Coming soon!" />
        </div>
        <div class="md:col-span-2">
          <label for="photo" class="block text-sm font-semibold text-gray-700 mb-2">
            Photo URL <span class="text-gray-400">(optional)</span>
            <span class="inline-block relative ml-1 group cursor-help">
              <span class="bg-gray-400 text-white rounded-full w-4 h-4 text-xs flex items-center justify-center hover:bg-gray-500">?</span>
              <div class="absolute left-0 top-6 bg-gray-800 text-white text-xs rounded-lg p-3 w-64 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10 shadow-lg">
                <p><strong>Steps to upload:</strong></p>
                <ol class="list-decimal ml-4 space-y-1">
                  <li>Go to <strong>imgur.com/upload</strong></li>
                  <li>Drag and drop your photo onto the page</li>
                  <li>Copy the image link on the right</li>
                  <li>Paste it here</li>
                </ol>
              </div>
            </span>
          </label>
          <input
            type="url"
            id="photo"
            name="photo"
            placeholder="https://i.imgur.com/yourimage.jpg"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 transition-all"
          >
          <p class="text-xs text-gray-500 mt-1">Upload to Imgur, Postimg, etc., and paste the direct link here.</p>
        </div>
        <div class="md:col-span-2">
          <label for="ending" class="block text-sm font-semibold text-gray-700 mb-2">Ending Message (optional)</label>
          <input id="ending" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="Love, The Johnsons" />
        </div>
      </div>
      <div class="hidden md:block mt-8">
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Live Preview â€” Page 2</h3>
        <div id="preview2Background" class="flex items-center justify-center rounded-lg w-24 mx-auto" style="aspect-ratio:9/16;background-color:#f3f3f3;">
          <div id="preview2Text" class="text-center space-y-3">
            <h2 id="preview2Msg1" class="text-2xl font-bold" style="display:none"></h2>
            <p id="preview2Msg2" class="text-lg" style="display:none"></p>
            <div id="preview2Photo" style="display:none"></div>
            <p id="preview2Ending" class="italic" style="display:none"></p>
          </div>
        </div>
      </div>
    </div>
    <!-- Generate URL -->
    <div class="bg-white rounded-2xl shadow-xl p-8 text-center">
      <button type="submit" class="w-full py-3 rounded-lg font-semibold bg-[#c0dcca] text-gray-800 hover:bg-[#a8d0b5]">Generate My Reveal URL</button>
    </div>
  </form>
  <div id="urlResult" class="hidden bg-white rounded-2xl shadow-xl p-8 text-center">
    <h2 class="text-2xl font-bold mb-4" style="color:#1f2937;">Your Reveal URL is Ready!</h2>
    <div class="flex items-center mb-4">
      <input id="generatedUrl" readonly class="flex-1 px-3 py-2 border border-gray-300 rounded text-sm" />
      <button id="copyBtn" class="ml-2 px-4 py-2 rounded bg-[#c0dcca] text-gray-800 hover:bg-[#a8d0b5]" aria-live="polite">Copy</button>
    </div>
    <div id="statusMsg" class="text-sm text-gray-700 mb-3"></div>
    <a id="previewLink" href="#" target="_blank" class="block text-center py-2 rounded mb-3 bg-[#c0dcca] text-gray-800 hover:bg-[#a8d0b5]">Preview Page</a>
    <button id="newBtn" class="w-full py-2 rounded bg-[#c0dcca] text-gray-800 hover:bg-[#a8d0b5]">Create Another</button>
  </div>
</div>
<script>
(function(){
  const accepted=['08260','Gke0907!'];
  const form=document.getElementById('passwordForm');
  const screen=document.getElementById('passwordScreen');
  const app=document.getElementById('mainApp');
  const error=document.getElementById('passwordError');
  if(sessionStorage.getItem('access')==='granted'){screen.classList.add('hidden');app.classList.remove('hidden');}
  form.addEventListener('submit',e=>{e.preventDefault();if(accepted.includes(document.getElementById('passwordInput').value.trim())){sessionStorage.setItem('access','granted');screen.classList.add('hidden');app.classList.remove('hidden');}else{error.classList.remove('hidden');}});
})();
const els={
  backgroundTheme:document.getElementById('backgroundTheme'),
  backgroundPicker:document.getElementById('backgroundPicker'),
  backgroundHex:document.getElementById('backgroundHex'),
  textColor:document.getElementById('textColor'),
  textPicker:document.getElementById('textPicker'),
  textHex:document.getElementById('textHex'),
  outlineColor:document.getElementById('outlineColor'),
  outlinePicker:document.getElementById('outlinePicker'),
  outlineHex:document.getElementById('outlineHex'),
  fontFamily:document.getElementById('fontFamily'),
  mainHeadline:document.getElementById('mainHeadline'),
  message1:document.getElementById('message1'),
  message2:document.getElementById('message2'),
  photo:document.getElementById('photo'),
  ending:document.getElementById('ending'),
  previewBackground:document.getElementById('previewBackground'),
  previewMain:document.getElementById('previewMain'),
  previewSub:document.getElementById('previewSub'),
  preview1Background:document.getElementById('preview1Background'),
  preview1Text:document.getElementById('preview1Text'),
  preview2Background:document.getElementById('preview2Background'),
  preview2Msg1:document.getElementById('preview2Msg1'),
  preview2Msg2:document.getElementById('preview2Msg2'),
  preview2Photo:document.getElementById('preview2Photo'),
  preview2Ending:document.getElementById('preview2Ending')
};

const backgroundThemes={
  beige:'#f3ddbb',
  pink:'#fcc0c5',
  blue:'#add4fd',
  yellow:'#fef3c7',
  green:'#81a969',
  purple:'#d2c5fc',
  gold:'#ffdf9a',
  white:'#ffffff'
};

const hexColorRegex=/^#([0-9A-Fa-f]{6})$/;

function toggleCustomColor(selectEl,customEl,val){
  customEl.classList.toggle('hidden',val!=='custom');
}

function syncColorInputs(picker,hex,val){
  if(picker&&hex){
    if(picker===document.activeElement){
      hex.value=val;
    }else if(hexColorRegex.test(val)){
      picker.value=val;
    }
  }
}

function applyTextStyles(el,color,outline,font){
  if(!el) return;
  el.style.color=color;
  el.style.fontFamily=`'${font}', sans-serif`;
  if(outline==='transparent'){
    el.style.textShadow='none';
    el.style.webkitTextStroke='0';
  }else{
    el.style.textShadow=`-1px -1px 0 ${outline}, 1px -1px 0 ${outline}, -1px 1px 0 ${outline}, 1px 1px 0 ${outline}`;
    el.style.webkitTextStroke=`1px ${outline}`;
  }
}

function getColorValue(selectEl,hexEl,def){
  const val=selectEl.value;
  if(val==='custom'){
    return hexEl.value?.trim()||def;
  }
  return val===''?def:(backgroundThemes[val]||val);
}

let updateTimeout;
function updatePreview(){
  clearTimeout(updateTimeout);
  updateTimeout=setTimeout(()=>{
    const bg=getColorValue(els.backgroundTheme,els.backgroundHex,'#f3ddbb');
    const text=getColorValue(els.textColor,els.textHex,'#000000');
    const outline=getColorValue(els.outlineColor,els.outlineHex,'transparent');
    const font=els.fontFamily.value;

    els.previewBackground.style.backgroundColor=bg;
    els.preview1Background.style.backgroundColor=bg;
    els.preview2Background.style.backgroundColor=bg;

    applyTextStyles(els.previewMain,text,outline,font);
    applyTextStyles(els.previewSub,text,outline,font);
    applyTextStyles(els.preview1Text,text,outline,font);
    applyTextStyles(els.preview2Msg1,text,outline,font);
    applyTextStyles(els.preview2Msg2,text,outline,font);
    applyTextStyles(els.preview2Ending,text,outline,font);

    const main=els.mainHeadline.value.trim().toUpperCase();
    els.previewMain.textContent=main||'Your Text Here';
    els.preview1Text.textContent=main;
    els.preview1Text.style.display=main?'block':'none';

    const msg1=els.message1.value.trim().toUpperCase();
    els.previewSub.textContent=msg1||'This will be the style for the reveal';
    els.preview2Msg1.textContent=msg1;
    els.preview2Msg1.style.display=msg1?'block':'none';

    const msg2=els.message2.value.trim();
    els.preview2Msg2.textContent=msg2;
    els.preview2Msg2.style.display=msg2?'block':'none';

    const img=els.photo.value.trim();
    if(img){
      els.preview2Photo.innerHTML=`<img src="${img}" class="max-h-40 mx-auto rounded-lg">`;
      els.preview2Photo.style.display='block';
    }else{
      els.preview2Photo.innerHTML='';
      els.preview2Photo.style.display='none';
    }

    const end=els.ending.value.trim();
    els.preview2Ending.textContent=end;
    els.preview2Ending.style.display=end?'block':'none';
  },100);
}

['backgroundTheme','backgroundPicker','backgroundHex','textColor','textPicker','textHex','outlineColor','outlinePicker','outlineHex','fontFamily','mainHeadline','message1','message2','photo','ending'].forEach(id=>{
  document.getElementById(id).addEventListener('input',updatePreview);
  document.getElementById(id).addEventListener('change',updatePreview);
});

els.backgroundTheme.addEventListener('change',e=>{
  toggleCustomColor(els.backgroundTheme,document.getElementById('backgroundCustom'),e.target.value);
  updatePreview();
});
els.textColor.addEventListener('change',e=>{
  toggleCustomColor(els.textColor,document.getElementById('textCustom'),e.target.value);
  updatePreview();
});
els.outlineColor.addEventListener('change',e=>{
  toggleCustomColor(els.outlineColor,document.getElementById('outlineColorCustom'),e.target.value);
  updatePreview();
});

[['backgroundPicker','backgroundHex'],['textPicker','textHex'],['outlinePicker','outlineHex']].forEach(([p,h])=>{
  const picker=document.getElementById(p);
  const hex=document.getElementById(h);
  picker.addEventListener('input',e=>{
    syncColorInputs(picker,hex,e.target.value);
    updatePreview();
  });
  hex.addEventListener('input',e=>{
    syncColorInputs(picker,hex,e.target.value);
    updatePreview();
  });
});

updatePreview();
const generateBtn=document.querySelector('#revealForm button[type="submit"]');
const defaultText=generateBtn.textContent;
const statusEl=document.getElementById('statusMsg');
document.getElementById('revealForm').addEventListener('submit',async e=>{
  e.preventDefault();
  generateBtn.disabled=true;
  const originalText=generateBtn.textContent;
  generateBtn.textContent='Generatingâ€¦';
  const params=new URLSearchParams({
    color:getColorValue(els.backgroundTheme,els.backgroundHex,''),
    textColor:getColorValue(els.textColor,els.textHex,''),
    outlineColor:getColorValue(els.outlineColor,els.outlineHex,''),
    font:els.fontFamily.value,
    main:els.mainHeadline.value.trim(),
    sub:els.message1.value.trim(),
    date:els.message2.value.trim(),
    photo:els.photo.value.trim(),
    from:els.ending.value.trim()
  });
  const base='https://bigreveal.joyjotstudio.store/';
  let full=`${base}?${params.toString()}`;
  let shortened=false;
  try{
    const r=await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(full)}`);
    if(r.ok){
      const short=await r.text();
      if(short.startsWith('http')){full=short;shortened=true;}
    }
  }catch{}
  statusEl.textContent=shortened?'Short link created.':'Using full link.';
  setTimeout(()=>{statusEl.textContent='';},3000);
  generateBtn.disabled=false;
  generateBtn.textContent=originalText;
  document.getElementById('generatedUrl').value=full;
  document.getElementById('previewLink').href=full;
  document.getElementById('urlResult').classList.remove('hidden');
});
document.getElementById('copyBtn').addEventListener('click',async()=>{
  const btn=document.getElementById('copyBtn');
  const url=document.getElementById('generatedUrl').value;
  try{await navigator.clipboard.writeText(url);}catch{const inp=document.getElementById('generatedUrl');inp.select();document.execCommand('copy');}
  const original=btn.textContent;
  btn.textContent='Copied!';
  setTimeout(()=>{btn.textContent=original;},1500);
});
document.getElementById('newBtn').addEventListener('click',()=>{
  document.getElementById('revealForm').reset();
  document.getElementById('urlResult').classList.add('hidden');
  statusEl.textContent='';
  generateBtn.disabled=false;
  generateBtn.textContent=defaultText;
  updatePreview();
});
</script>
</body>
</html>
